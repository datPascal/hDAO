{"version":3,"file":"all-proposals-created-by-user.js","sourceRoot":"","sources":["../../../src/dao/one_vote_per_user_dao/all-proposals-created-by-user.ts"],"names":[],"mappings":";AAAA,OAAO,EAAE,UAAU,EAAE,IAAI,EAAE,MAAM,KAAK,CAAC;AACvC,OAAO,EAAE,KAAK,EAAE,aAAa,EAAE,QAAQ,EAAE,MAAM,mBAAmB,CAAC;AAEnE,OAAO,EAAE,eAAe,EAAE,MAAM,mBAAmB,CAAC;AACpD,OAAO,EAAE,mBAAmB,EAAE,cAAc,EAAE,MAAM,gBAAgB,CAAC;AACrE,OAAO,iCAAiC,CAAC;AACzC,OAAO,wBAAwB,CAAC;AAGzB,IAAM,yBAAyB,GAA/B,MAAM,yBAA0B,SAAQ,UAAU;IAcvD,KAAK,CAAC,YAAY;QAChB,MAAM,QAAQ,GAAG,IAAI,CAAC,OAAO,CAAC,SAAS,CAAC,IAAI,CAAC,CAAC,CAAgB,EAAE,EAAE,CAAC,CAAC,CAAC,OAAO,KAAK,KAAK,CAAE,CAAC;QAEzF,IAAI,CAAC,QAAQ,GAAG,MAAM,IAAI,CAAC,YAAY,CAAC,QAAQ,CAAC;YAC/C,UAAU,EAAE,IAAI;YAChB,OAAO,EAAE,QAAQ,CAAC,OAAO;YACzB,SAAS,EAAE,uBAAuB;YAClC,OAAO,EAAE,mCAAmC;YAC5C,OAAO,EAAE,IAAI,CAAC,MAAM;YACpB,UAAU,EAAE,QAAQ,CAAC,OAAO,CAAC,CAAC,CAAC;SAChC,CAAC,CAAC;IACL,CAAC;IAED,MAAM;QACJ,IAAI,CAAC,IAAI,CAAC,QAAQ,EAAE;YAClB,OAAO,IAAI,CAAA;;aAEJ,CAAC;SACT;QACD,OAAO,IAAI,CAAA;;UAEL,IAAI,CAAC,QAAQ,CAAC,GAAG,CAAC,CAAC,CAAC,EAAE,CACtB,IAAI,CAAA,qCAAqC,CAAC,CAAC,aAAa,CAAC,MAAM,CAAC,IAAI,uDAAuD,CAC5H;;KAEJ,CAAC;IACJ,CAAC;CACF,CAAA;AAtCC;IADC,QAAQ,EAAE;yDACU;AAGrB;IADC,KAAK,EAAE;2DAC4B;AAGpC;IADC,eAAe,CAAC,EAAE,OAAO,EAAE,mBAAmB,EAAE,CAAC;+DACtB;AAG5B;IADC,eAAe,CAAC,EAAE,OAAO,EAAE,cAAc,EAAE,CAAC;0DAClB;AAZhB,yBAAyB;IADrC,aAAa,CAAC,+BAA+B,CAAC;GAClC,yBAAyB,CAyCrC;SAzCY,yBAAyB","sourcesContent":["import { LitElement, html } from 'lit';\nimport { state, customElement, property } from 'lit/decorators.js';\nimport { InstalledCell, AgentPubKey, Record, AppWebsocket, InstalledAppInfo } from '@holochain/client';\nimport { contextProvided } from '@lit-labs/context';\nimport { appWebsocketContext, appInfoContext } from '../../contexts';\nimport '@material/mwc-circular-progress';\nimport './proposal-page-detail';\n\n@customElement('all-proposals-created-by-user')\nexport class AllProposalsCreatedByUser extends LitElement {\n\n  @property()\n  author!: AgentPubKey;\n\n  @state()\n  _records: Array<Record> | undefined;\n\n  @contextProvided({ context: appWebsocketContext })\n  appWebsocket!: AppWebsocket;\n\n  @contextProvided({ context: appInfoContext })\n  appInfo!: InstalledAppInfo;\n\n  async firstUpdated() {\n    const cellData = this.appInfo.cell_data.find((c: InstalledCell) => c.role_id === 'dao')!;\n\n    this._records = await this.appWebsocket.callZome({\n      cap_secret: null,\n      cell_id: cellData.cell_id,\n      zome_name: 'one_vote_per_user_dao',\n      fn_name: 'get_all_proposals_created_by_user',\n      payload: this.author,\n      provenance: cellData.cell_id[1]\n    });\n  }\n\n  render() {\n    if (!this._records) {\n      return html`<div style=\"display: flex; flex: 1; align-items: center; justify-content: center\">\n        <mwc-circular-progress indeterminate></mwc-circular-progress>\n      </div>`;\n    }\n    return html`\n      <div style=\"display: flex; flex-direction: column\">\n        ${this._records.map(r => \n          html`<proposal-page-detail .actionHash=${r.signed_action.hashed.hash} style=\"margin-bottom: 16px;\"></proposal-page-detail>`\n        )}\n      </div>\n    `;\n  }\n}\n"]}