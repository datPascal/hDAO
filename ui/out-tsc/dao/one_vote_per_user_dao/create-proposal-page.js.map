{"version":3,"file":"create-proposal-page.js","sourceRoot":"","sources":["../../../src/dao/one_vote_per_user_dao/create-proposal-page.ts"],"names":[],"mappings":";AAAA,OAAO,EAAE,UAAU,EAAE,GAAG,EAAE,IAAI,EAAE,MAAM,KAAK,CAAC;AAC5C,OAAO,EAAE,KAAK,EAAE,aAAa,EAAE,MAAM,mBAAmB,CAAC;AAEzD,OAAO,EAAE,eAAe,EAAE,MAAM,mBAAmB,CAAC;AACpD,OAAO,EAAE,mBAAmB,EAAE,cAAc,EAAE,MAAM,gBAAgB,CAAC;AAErE,OAAO,sBAAsB,CAAC;AAC9B,OAAO,wBAAwB,CAAC;AAChC,OAAO,yBAAyB,CAAC;AAG1B,IAAM,kBAAkB,GAAxB,MAAM,kBAAmB,SAAQ,UAAU;IAUhD,mBAAmB;QACjB,OAAO,IAAI,CAAC,QAAQ,IAAI,IAAI,CAAC,MAAM,CAAC;IACtC,CAAC;IAQD,KAAK,CAAC,kBAAkB;QACtB,MAAM,QAAQ,GAAG,IAAI,CAAC,OAAO,CAAC,SAAS,CAAC,IAAI,CAAC,CAAC,CAAgB,EAAE,EAAE,CAAC,CAAC,CAAC,OAAO,KAAK,KAAK,CAAE,CAAC;QAEzF,MAAM,YAAY,GAAiB;YACjC,OAAO,EAAE,IAAI,CAAC,QAAS;YAEvB,KAAK,EAAE,IAAI,CAAC,MAAO;SACpB,CAAC;QAEF,MAAM,MAAM,GAAW,MAAM,IAAI,CAAC,YAAY,CAAC,QAAQ,CAAC;YACtD,UAAU,EAAE,IAAI;YAChB,OAAO,EAAE,QAAQ,CAAC,OAAO;YACzB,SAAS,EAAE,uBAAuB;YAClC,OAAO,EAAE,sBAAsB;YAC/B,OAAO,EAAE,YAAY;YACrB,UAAU,EAAE,QAAQ,CAAC,OAAO,CAAC,CAAC,CAAC;SAChC,CAAC,CAAC;QAEH,IAAI,CAAC,aAAa,CAAC,IAAI,WAAW,CAAC,uBAAuB,EAAE;YAC1D,QAAQ,EAAE,IAAI;YACd,OAAO,EAAE,IAAI;YACb,MAAM,EAAE;gBACN,UAAU,EAAE,MAAM,CAAC,aAAa,CAAC,MAAM,CAAC,IAAI;aAC7C;SACF,CAAC,CAAC,CAAC;IACN,CAAC;IAED,MAAM;QACJ,OAAO,IAAI,CAAA;;;;;;;2FAO4E,CAAC,CAAc,EAAE,EAAE,GAAG,IAAI,CAAC,MAAM,GAAI,CAAC,CAAC,MAAc,CAAC,KAAK,CAAC,CAAA,CAAE;yFAChE,CAAC,CAAc,EAAE,EAAE,GAAG,IAAI,CAAC,QAAQ,GAAI,CAAC,CAAC,MAAc,CAAC,KAAK,CAAC,CAAC,CAAE;;+BAE3H,IAAI,CAAC,kBAAkB;;;;SAI7C,CAAC;IACR,CAAC;;AAEM,yBAAM,GAAG,GAAG,CAAA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;CAkDpB,CAAA;AAhHC;IADC,KAAK,EAAE;oDAEG;AAGX;IADC,KAAK,EAAE;kDAEG;AAOX;IADC,eAAe,CAAC,EAAE,OAAO,EAAE,mBAAmB,EAAE,CAAC;wDACtB;AAG5B;IADC,eAAe,CAAC,EAAE,OAAO,EAAE,cAAc,EAAE,CAAC;mDAClB;AAlBhB,kBAAkB;IAD9B,aAAa,CAAC,sBAAsB,CAAC;GACzB,kBAAkB,CAqH9B;SArHY,kBAAkB","sourcesContent":["import { LitElement, css ,html } from 'lit';\nimport { state, customElement } from 'lit/decorators.js';\nimport { InstalledCell, ActionHash, Record, AppWebsocket, InstalledAppInfo } from '@holochain/client';\nimport { contextProvided } from '@lit-labs/context';\nimport { appWebsocketContext, appInfoContext } from '../../contexts';\nimport { ProposalPage } from './proposal-page';\nimport '@material/mwc-button';\nimport '@material/mwc-textarea';\nimport '@material/mwc-textfield';\n\n@customElement('create-proposal-page')\nexport class CreateProposalPage extends LitElement {\n\n  @state()\n  _content: string\n | undefined;\n\n  @state()\n  _title: string\n | undefined;\n\n  isProposalPageValid() {\n    return this._content && this._title;\n  }\n\n  @contextProvided({ context: appWebsocketContext })\n  appWebsocket!: AppWebsocket;\n\n  @contextProvided({ context: appInfoContext })\n  appInfo!: InstalledAppInfo;\n\n  async createProposalPage() {\n    const cellData = this.appInfo.cell_data.find((c: InstalledCell) => c.role_id === 'dao')!;\n\n    const proposalPage: ProposalPage = { \n      content: this._content!,\n\n      title: this._title!,\n    };\n\n    const record: Record = await this.appWebsocket.callZome({\n      cap_secret: null,\n      cell_id: cellData.cell_id,\n      zome_name: 'one_vote_per_user_dao',\n      fn_name: 'create_proposal_page',\n      payload: proposalPage,\n      provenance: cellData.cell_id[1]\n    });\n\n    this.dispatchEvent(new CustomEvent('proposal-page-created', {\n      composed: true,\n      bubbles: true,\n      detail: {\n        actionHash: record.signed_action.hashed.hash\n      }\n    }));\n  }\n\n  render() {\n    return html`\n      \n      <div style=\"display: flex; flex: 1; flex-direction: column; align-items: center;\">\n        <h1 style=\"font-family: 'Space Mono'; color: #183E29\">Proposal Creation</h1>\n      \n        <div class=\"Proposalbox\">\n          <div class=\"ProposalboxesInner\">\n              <mwc-textfield style=\"width:700px;\" outlined label=\"Proposal Title\" @input=${(e: CustomEvent) => { this._title = (e.target as any).value;} }></mwc-textfield>\n              <mwc-textarea style=\"width:700px;\" outlined label=\"Proposal Text\" @input=${(e: CustomEvent) => { this._content = (e.target as any).value; } }></mwc-textarea>\n\n              <button @click=${this.createProposalPage}>Create Proposal</button>\n          </div>\n        </div>\n      </div>\n        `;\n  }\n\n  static styles = css`\n  .Proposalbox {\n      flex-direction: column;\n      flex: 0 0 auto;\n      width: 800px;\n      max-height; 1200;\n      display: flex;\n      padding: var(2rem);\n      z-index: 1;\n      box-shadow: 0 8px 26px -4px hsla(0,0%,8%,.15),0 8px 9px -5px hsla(0,0%,8%,.06)!important;\n      margin-top: var(2rem);\n      align-items: flex-start;\n      border-radius: var(2rem);\n      flex-direction: column;\n      backdrop-filter: saturate(200%) blur(30px);\n      overflow-wrap: break-word;\n      background-color: #d3d0d0;\n      border-radius: 25px;\n      align-items: center;\n    }\n    .ProposalboxesInner {\n      display: flex; \n      flex-direction: column;\n      border-width: 2;\n      border-color: black;\n    }\n    .Proposaltitle {\n      padding-left: 1rem;\n      padding-top: 1rem;\n      white-space: pre-line;\n      padding-bottom: 1rem;\n      width: 700px;\n      font-size: 25px;\n      overflow-wrap: break-word;\n      max-width: 100%;\n      text-overflow: ellipsis;\n      color: black;\n      align-self: content;\n    }\n    .Proposalcontent {\n      padding-left: 1rem;\n      white-space: pre-line;\n      overflow-wrap: break-word;\n      max-width: 100%;\n      text-overflow: ellipsis;\n      width: 700px;\n      color: black;\n      padding-bottom: 1rem;\n      align-self: content;\n    }\n`\n\n}\n"]}